<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="kr.ict.mydream.itvres.ItvDao">
    <select id="itvAttitudeList" resultType="java.util.Map"> 
        SELECT m.name AS mname, a.intno AS intno, a.memno AS memno, a.credt AS credt FROM TBMEMBER M JOIN tbintres a ON m.memno = a.memno WHERE a.inttypecd = '1' ORDER BY m.name DESC
    </select>
    <select id="itvCareerList" resultType="java.util.Map">
        SELECT m.name AS mname, a.intno AS intno, a.memno AS memno, a.credt AS credt FROM TBMEMBER M JOIN tbintres a ON m.memno = a.memno WHERE a.inttypecd = '2' ORDER BY m.name DESC
    </select>

    <select id="detail" parameterType="int" resultType="kr.ict.mydream.dto.ItvDTO">
        SELECT m.name AS mname, a.credt AS credt, a.cnsfeedbk AS cnsfeedbk, a.aifeedbk AS aifeedbk, d.question AS question, a.intno as intno, d.qno as qno
        FROM tbmember M JOIN tbintres a ON m.memno = a.memno JOIN tbintdetail d ON a.intno = d.intno WHERE a.intno = #{intno}
    </select>

    <select id="faceData" parameterType="int" resultType="Integer">
        SELECT escore FROM TBINTDETAIL WHERE INTNO = #{intno}
    </select>

    <select id="getBarData" parameterType="int" resultType="int">
        SELECT pbadcnt FROM tbintdetail WHERE intno = #{intno}
    </select>

    <select id="wordCloud" parameterType="int" resultType="String">
        SELECT answer FROM tbintdetail WHERE intno = #{intno}
    </select>

    <select id="questionData" parameterType="int" resultType="java.util.Map">
        SELECT question , to_char(answer) AS answer, to_char(aifeedbk) as aifeedbk FROM tbintdetail WHERE intno = #{intno}
    </select>

    <select id="ctFeedbackList" parameterType="int" resultType="String">
        SELECT TO_CHAR(c.qcnsfeedbk) AS qcnsfeedbk FROM tbintdetail d JOIN tbconsulteval c ON d.intno = c.intno AND d.qno = c.qno WHERE d.intno = #{intno}
    </select>

</mapper>